morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ mysql < ../check-placement.sql
node	aws_region	is_leader	c
1	us-east-1	0	106
1	us-east-1	1	99
2	us-east-1	1	90
2	us-east-1	0	116
3	us-east-1	0	87
3	us-east-1	1	120
4	us-east-2	0	204
5	us-east-2	0	208
6	us-east-2	0	206
7	us-west-2	0	103
8	us-west-2	0	103
9	us-west-2	0	103
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ kill -9 `ps aux | grep tikv6 | grep -v grep | awk '{print $2}'`
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ mysql < ../check-placement.sql
node	aws_region	is_leader	c
1	us-east-1	1	103
1	us-east-1	0	109
2	us-east-1	0	121
2	us-east-1	1	94
3	us-east-1	0	90
3	us-east-1	1	123
4	us-east-2	0	211
5	us-east-2	0	214
6	us-east-2	0	215
7	us-west-2	0	106
8	us-west-2	0	106
9	us-west-2	0	108
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ mysql information_schema -e 'select * from tikv_store_status'
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+-----------------+
| STORE_ID | ADDRESS         | STORE_STATE | STORE_STATE_NAME | LABEL                                                                                                              | VERSION | CAPACITY | AVAILABLE | LEADER_COUNT | LEADER_WEIGHT | LEADER_SCORE | LEADER_SIZE | REGION_COUNT | REGION_WEIGHT | REGION_SCORE       | REGION_SIZE | START_TS            | LAST_HEARTBEAT_TS   | UPTIME          |
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+-----------------+
|        1 | 127.0.0.1:20168 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |           11 |             1 |           11 |          11 |          130 |             1 | 13982.336944791981 |       10354 | 2022-09-01 14:39:02 | 2022-09-01 15:27:02 | 48m0.758645564s |
|        4 | 127.0.0.1:20167 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |           17 |             1 |           17 |          17 |          158 |             1 | 14223.978371946674 |       10533 | 2022-09-01 14:39:02 | 2022-09-01 15:27:03 | 48m1.138968801s |
|        7 | 127.0.0.1:20164 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |            0 |             0 |            0 |           0 |          245 |             1 | 27984.763736165332 |       20723 | 2022-09-01 14:39:02 | 2022-09-01 15:27:03 | 48m1.100943651s |
|        9 | 127.0.0.1:20162 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |          115 |             1 |          115 |        8980 |          247 |             1 |  27996.91693257756 |       20732 | 2022-09-01 14:39:02 | 2022-09-01 15:27:03 | 48m1.090990455s |
|        8 | 127.0.0.1:20161 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |          116 |             1 |          116 |       10032 |          243 |             1 | 28151.095163882652 |       20846 | 2022-09-01 14:39:02 | 2022-09-01 15:27:02 | 48m0.841684895s |
|       10 | 127.0.0.1:20166 |           0 | Disconnected     | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 752.6GiB  |            0 |             0 |            0 |           0 |          248 |             1 | 28064.196479176255 |       20775 | 2022-09-01 14:39:02 | 2022-09-01 15:25:52 | 46m50.80154801s |
|       11 | 127.0.0.1:20165 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |            0 |             0 |            0 |           0 |          245 |             1 |  28199.48029727102 |       20882 | 2022-09-01 14:39:02 | 2022-09-01 15:27:03 | 48m1.091877632s |
|        5 | 127.0.0.1:20169 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |            7 |             1 |            7 |           7 |          123 |             1 | 13970.182931951247 |       10345 | 2022-09-01 14:39:02 | 2022-09-01 15:27:02 | 48m0.759755994s |
|        6 | 127.0.0.1:20163 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 754.8GiB  |          125 |             1 |          125 |       12165 |          246 |             1 |   28088.6835367061 |       20800 | 2022-09-01 14:39:02 | 2022-09-01 15:27:02 | 48m0.966486221s |
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+-----------------+
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ /home/morgo/.tiup/components/tikv/v6.2.0/tikv-server --pd=127.0.0.1:2379 --data-dir=/mnt/evo970/data/tikv6 -A 127.0.0.1:20166 --log-file=/mnt/evo970/logs/tikv6.log --config=/mnt/evo970/etc/config6.toml &
[4] 2933920
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ mysql information_schema -e 'select * from tikv_store_status'
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+------------------+
| STORE_ID | ADDRESS         | STORE_STATE | STORE_STATE_NAME | LABEL                                                                                                              | VERSION | CAPACITY | AVAILABLE | LEADER_COUNT | LEADER_WEIGHT | LEADER_SCORE | LEADER_SIZE | REGION_COUNT | REGION_WEIGHT | REGION_SCORE       | REGION_SIZE | START_TS            | LAST_HEARTBEAT_TS   | UPTIME           |
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+------------------+
|        1 | 127.0.0.1:20168 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |           11 |             1 |           11 |          11 |          132 |             1 |  14239.49551172218 |       10544 | 2022-09-01 14:39:02 | 2022-09-01 15:28:52 | 49m50.770764996s |
|        4 | 127.0.0.1:20167 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |           17 |             1 |           17 |          17 |          160 |             1 | 14509.534923304127 |       10744 | 2022-09-01 14:39:02 | 2022-09-01 15:28:53 | 49m51.149951462s |
|        5 | 127.0.0.1:20169 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |            7 |             1 |            7 |           7 |          125 |             1 | 14232.743072527515 |       10539 | 2022-09-01 14:39:02 | 2022-09-01 15:28:52 | 49m50.771774304s |
|        6 | 127.0.0.1:20163 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |          127 |             1 |          127 |       12372 |          250 |             1 | 28631.434142022987 |       21201 | 2022-09-01 14:39:02 | 2022-09-01 15:28:52 | 49m50.979210444s |
|        7 | 127.0.0.1:20164 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |            0 |             0 |            0 |           0 |          249 |             1 | 28485.638876886787 |       21093 | 2022-09-01 14:39:02 | 2022-09-01 15:28:53 | 49m51.112458922s |
|        9 | 127.0.0.1:20162 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |          117 |             1 |          117 |        9180 |          251 |             1 |  28512.64882866252 |       21113 | 2022-09-01 14:39:02 | 2022-09-01 15:28:53 | 49m51.103509758s |
|        8 | 127.0.0.1:20161 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |          118 |             1 |          118 |       10220 |          247 |             1 | 28703.157927565924 |       21254 | 2022-09-01 14:39:02 | 2022-09-01 15:28:52 | 49m50.853522278s |
|       10 | 127.0.0.1:20166 |           0 | Disconnected     | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 752.6GiB  |            0 |             0 |            0 |           0 |          253 |             1 | 28757.189634113314 |       21288 | 2022-09-01 15:28:54 | 2022-09-01 15:25:52 |                  |
|       11 | 127.0.0.1:20165 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 751.7GiB  |            0 |             0 |            0 |           0 |          248 |             1 |  28615.28522851418 |       21189 | 2022-09-01 14:39:02 | 2022-09-01 15:28:53 | 49m51.103602419s |
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+------------------+
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ mysql information_schema -e 'select * from tikv_store_status'
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+-----------------+
| STORE_ID | ADDRESS         | STORE_STATE | STORE_STATE_NAME | LABEL                                                                                                              | VERSION | CAPACITY | AVAILABLE | LEADER_COUNT | LEADER_WEIGHT | LEADER_SCORE | LEADER_SIZE | REGION_COUNT | REGION_WEIGHT | REGION_SCORE       | REGION_SIZE | START_TS            | LAST_HEARTBEAT_TS   | UPTIME          |
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+-----------------+
|        1 | 127.0.0.1:20168 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |           11 |             1 |           11 |          11 |          132 |             1 |  14239.97758021578 |       10544 | 2022-09-01 14:39:02 | 2022-09-01 15:29:02 | 50m0.771340393s |
|        4 | 127.0.0.1:20167 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |           17 |             1 |           17 |          17 |          160 |             1 | 14589.704699281758 |       10803 | 2022-09-01 14:39:02 | 2022-09-01 15:29:03 | 50m1.150985817s |
|       11 | 127.0.0.1:20165 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |            0 |             0 |            0 |           0 |          248 |             1 | 28706.734767462032 |       21256 | 2022-09-01 14:39:02 | 2022-09-01 15:29:03 | 50m1.105173992s |
|        5 | 127.0.0.1:20169 |           0 | Up               | [{"key": "region", "value": "us-west-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-west-2a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |            7 |             1 |            7 |           7 |          125 |             1 | 14233.224918158005 |       10539 | 2022-09-01 14:39:02 | 2022-09-01 15:29:02 | 50m0.777128999s |
|        6 | 127.0.0.1:20163 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |          127 |             1 |          127 |       12439 |          250 |             1 |  28712.08704949267 |       21260 | 2022-09-01 14:39:02 | 2022-09-01 15:29:02 | 50m0.980102745s |
|        7 | 127.0.0.1:20164 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |            0 |             0 |            0 |           0 |          249 |             1 | 28475.794717536737 |       21085 | 2022-09-01 14:39:02 | 2022-09-01 15:29:03 | 50m1.113567511s |
|        9 | 127.0.0.1:20162 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |          117 |             1 |          117 |        9172 |          251 |             1 | 28502.805643701136 |       21105 | 2022-09-01 14:39:02 | 2022-09-01 15:29:03 | 50m1.105057571s |
|        8 | 127.0.0.1:20161 |           0 | Up               | [{"key": "region", "value": "us-east-1"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-1a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |          118 |             1 |          118 |       10220 |          247 |             1 | 28794.602710524097 |       21321 | 2022-09-01 14:39:02 | 2022-09-01 15:29:02 | 50m0.85500787s  |
|       10 | 127.0.0.1:20166 |           0 | Up               | [{"key": "region", "value": "us-east-2"}, {"key": "disk", "value": "ssd"}, {"key": "zone", "value": "us-east-2a"}] | 6.2.0   | 915.8GiB | 755.2GiB  |            0 |             0 |            0 |           0 |          253 |             1 | 28835.237171435754 |       21347 | 2022-09-01 15:28:54 | 2022-09-01 15:29:04 | 10.434235101s   |
+----------+-----------------+-------------+------------------+--------------------------------------------------------------------------------------------------------------------+---------+----------+-----------+--------------+---------------+--------------+-------------+--------------+---------------+--------------------+-------------+---------------------+---------------------+-----------------+
morgo@ubuntu:~/go/src/github.com/pingcap/dr-testing/tikv-node-failure/scenario-2.1$ mysql < ../check-placement.sql
node	aws_region	is_leader	c
1	us-east-1	1	107
1	us-east-1	0	113
2	us-east-1	1	97
2	us-east-1	0	124
3	us-east-1	1	127
3	us-east-1	0	94
4	us-east-2	0	219
5	us-east-2	0	221
6	us-east-2	0	222
7	us-west-2	0	111
8	us-west-2	0	109
9	us-west-2	0	111
